RavenCore - це бот якого можна запрограмувати на мові `JavaScript`. Просто додайте бота на свій сервер, додайте команду та запрограмуйте її.

---

Термінологія:
- index (індекс) - початковий файл який виконує команду
- action (екшн) - файл де ви пишете код
- member (мембер) - учасник сервера.
- guild (гільдія) - сам сервер, та все що з ним повязано.
- channel (канал) - канал, в якому надістали повідомлення, або будь який інший канал на сервері.
- owner (овнер) - власник сервера

## ЕКШН
На одну команду ви можете використовувати тільки 1 екшн, `index` його не можна змінити або видалити.   
Також ви можете додати інші екшени із власними назвами (їх можна видаляти).   
В них можна перенести частину коду щоб розбити його на кусоки та не засмічувати `index`
Використовуйте `$import("actionName")` щоб імпортувати код з іншого екшену, але в тому екшені має бути `return someData`
Екшн являє собою асинхронну функцію, тому ви можете використовувати `await` та `return` на верхньому рівні

---

## ЗМІННІ:

Повний текст команди `srting`
```js
$content // '!foo 1 2 3'
```

Поточна викликана команда `srting`
```js
$cmd // 'foo'
```

Параметри які йдуть після команди `array`
```js
$args // ['1', '2', '3']
```

Дані про користувача `object`
```js
$member
```

Дані про канал `object`
```js
$channel
```

Дані про сервер `object`
```js
$guild
```

Дані про поточне повідомлення `object`
```js
$message
```



## ФУНКЦІЇ:

### Надсилання повідомлення

Щоб надіслати звичайне повідомлення, використовуйте
```js
$send.message("hello")
```

Щоб зробити відповідь
```js
$send.reply("hello")
```
або можете просто використати
```js
return "hello"
```
Якщо ви щось повертаєте з екшена, то це зробить відповідь, якщо буде falsy то нічого не відправиться   
Також можна надіслати разом з ембедами та компонентами
```js
$send.reply("hello", [[btn]], { embeds: [embed] })
// або
return [ "hello", [[btn]], { embeds: [embed] } ]
```
Використовуючи $send.message() або $send.reply() ви можете почекати доки повідомлення надішлеться, а потім з ним щось зробити, наприклад його можна відредагувати або видалити
```js
let msg = await $send.reply("hello")
await $timeout(2) // wait 2 seconds
msg.$edit("bye")
```
\*ви можете використовувати await на верхньому рівну, тому що екшн являє собою асинхронну функцію
Цей код надішле відповіть "hello", та через 2 секунди, змінить її на "bye"    
Доступні такі методи, `msg.$edit()`, `msg.$delete()` та `msg.$reply()`



### $arguments
Аргументи команди, тобто додаткові значення після !cmd arg1 arg2 ... argN
Це по суті те саме що $args але зручніше, наприклад така команда !sum 2 3
```js
let a1 = $arguments.get(1)
let a2 = $arguments.get(2)

a1 + a2 // 5
```
Ми отримали саме 5, тому що функція $arguments.get(N) перетворює в число якщо це можливо, в іншому випадку буде рядок (string)   
Є ще інші додаткові функції, якщо команда буде !test 123 hello 555 foo 
```js
$arguments.range(2, 3) // ["hello", "555"]
$arguments.before(2)  // ["123", "hello"]
$arguments.after(2)  // ["hello", "555", "foo"]
```

### $timeout
Просто призупиняє код на заданий час, від 1с до 60с
```js
$send.message("hello")
await $timeout(5) 
$send.message("5 seconds have passed")
```

### $button
Ви можете створити кнопку таким чином
```js
let btn = $button({
    text: "Say hello",
    action: ({ $reply }) => $reply("hello")
})

$send.message("test", [[btn]])
```
Після чого ви побачите повідомлення "test" з кнопкою "Say hello", якщо на неї нажати то бот відповість "hello"
`[[btn]]` Кнопки записуються в 2 вимірному масиві, тому що можна зробити декілька рядів

 ```js
[
    [btn1, btn2, btn3],
    [btn4, btn5, btn6],
]
```
Як ви бачили в кнопки є параметр `action`, це код який виконається при натисканні кнопки, в нього ви можете передати функцію або рядок.   
- `action: "actionName"` Якщо передати рядок, це автоматичний імпорт з іншого екшену, всеодно що `action: $import("actionName")`, тому в `actionName` потрібно повернути функцію
```js
// actionName
return ({ $reply }) => $reply("the button is pressed")
```
- Або можна просто передати функцію
```js
action: ({ $reply }) => $reply("the button is pressed")
```


### $import
Імпортує дані з іншого файлу та опціонально передає параметри   
!!! Застереження. При імпорті файлу, весь код який там є, виконається.
Рекомендується використовувати лише функції та змінні, щоб не було проблем

```js
// index
let { foo } = $import("file123", { num: 100 })

foo // 200
```

```js
// file123
return {
    foo: $params.num * 2
}
```



### $random
Отримати випадкове число чи елемент масиву
```js
$random(10) // Від 0 до 10
$random(5, 15) // Від 5 до 15
$random([1, 2, 3, 4, 5]) // З масиву
$random(['a', 'b', 'c'], [20, 50, 30]) // З ймовірністю у %
```

### $range
Створити проміжок, тобто масив, зручно використовувати в for of
```js
$range(5) // [1, 2, 3, 4, 5]
$range(2, 6) // [2, 3, 4, 5, 6]
$range(1, 10, 2) // [1, 3, 5, 7, 9]
```





## СХОВИЩЕ

Сховище являє собою просту базу данних {ключ: значення}

Отримати дані про поточного користувача
```js
await $store.member('money').get() // 900
```

Отримати загальні дані відносто сервера
```js
await $store.global('money').get() // 300
```

Зміна даних (**Далі однаково для member та global**)
```js
await $store.global('money').set(500) // оновити значення (якщо такого поля немає то воно створиться) 
await $store.global('money').set(null) // видалити значення (якщо такого поля немає поверне false) 
```

### Операція зміни чисел
```js
// додати до поточного значення
await $store.global('money').inc(50) // Якщо було 500 то стане 550

// відняти від поточного значення
await $store.global('money').dec(50) // Якщо було 500 то стане 450
```

### Зміна масиву
```js
// додати нове значення до масиву 'roles'
await $store.global('roles').push('admin')

// видалити значення 'admin' з масиву 'roles'
await $store.global('roles').delete('admin')

// замінити 'admin' на 'user' у масиві 'roles'
await $store.global('roles').replace('admin', 'user')

// перевірка, чи є 'user' у масиві 'roles', повертне true або false
await $store.global('roles').has('user')

```


### !!! mention знаходиться в розробці, тому поки недоступний

Отримати дані про згаданого користувача за індексом
```js
await $store.mention(0, 'money').get() // 800
await $store.mention(1, 'money').get() // 500
```

Оновити дані згаданого користувача
```js
await $store.mention(0, 'money').set(200) // true якщо оновилося успішно
await $store.mention(1, 'money').set(400) // false якщо помилка оновилося успішно
```

Отримати дані кожного згаданого користувача згідно з масивом (лише для читання)
```js
await $store.mention(['money', 'money']).get() // [200, 400]
```

